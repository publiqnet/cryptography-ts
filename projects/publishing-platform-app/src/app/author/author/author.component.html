<div class="vh-centered" *ngIf="loadingAuthor">
    <mat-spinner></mat-spinner>
</div>
<div class="author-header-wrap profile-bg" *ngIf="!loadingAuthor" style="    background: white;">
    <div class="inner-wrap title-wrap">
        <div class="background vh-centered"></div>

        <div class="avatar-wrap">
            <div class="avatar" [ngStyle]="{'background-image': avatarUrl ? 'url(' + avatarUrl + ')' : 'url(/assets/no-image-article.jpg)'}">
                <span *ngIf="(!avatarUrl && shortName)" class="vh-centered">{{shortName}}</span>
            </div>
        </div>
        <div style="z-index: 1;position: relative;">
            <h1 id="a-title">{{ author?.firstName }} {{ author?.lastName }}</h1>
            <h3>
                {{'author.rating' | translate}} <span>{{author && author.rating ? author.rating.toFixed(1) : 0}}</span> {{'author.followers' | translate}} <span id="followers-count">{{author && author.subscribersCount ? author.subscribersCount : 0}}</span>                {{'author.stories' | translate}} <span>{{author && author.articlesCount ? author.articlesCount : 0}}</span> {{'author.views' | translate}} <span>{{author && author.views ? author.views : 0}}</span>
            </h3>
            <div *ngIf="author && !isCurrentUser; else settings" class="text-center text-md-left mt-3">
                <!-- (click)="(canFollow ? follow() : unfollow())" -->
                <div [ngClass]="{'follow-button': true}">
                    <i class="mr-2" [ngClass]="canFollow ? 'icon-follow' : 'icon-unfollow'"></i>
                    <span>{{(canFollow ? 'author.follow' : 'author.unfollow') | translate}}</span>
                </div>
            </div>
            <ng-template #settings>
                <div class="text-center text-md-left mt-3">
                    <div [routerLink]="['/user/settings']" class="follow-button">
                        <i class="icon-settings mr-1"></i>
                        <span>{{"header.settings" | translate}}</span>
                    </div>
                </div>
            </ng-template>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-lg-8 col-xl-9 stories">
            <ui-tab *ngIf="isCurrentUser" [className]="'author-tab'" (onTabChange)="tabChange($event)" [tabs]="tabs"></ui-tab>
            <div *ngIf="publishedContent.length && (selectedTab == '1' || !isCurrentUser)" class="text-center">
                <div *ngIf="listType == 'grid'" [class.masonry]="isMasonryLoaded" [useImagesLoaded]="true" (layoutComplete)="onLayoutComplete($event)" ngx-masonry [options]="myOptions">
                    <ui-content-single *ngFor="let data of publishedContent" (accountClick)="utilService.routerChangeHelper('account',$event.slug)" (contentClick)="utilService.routerChangeHelper('content',$event)" (publicationClick)="utilService.routerChangeHelper('publication',$event.slug)"
                        (tagClick)="utilService.routerChangeHelper('tag',$event)" ngxMasonryItem [type]="listType" [contentData]="data"></ui-content-single>
                </div>
                <div *ngIf="listType == 'single'">
                    <ui-content-single *ngFor="let data of publishedContent" [type]="listType" (accountClick)="utilService.routerChangeHelper('account',$event.slug)" (contentClick)="utilService.routerChangeHelper('content',$event)" (publicationClick)="utilService.routerChangeHelper('publication',$event.slug)"
                        (tagClick)="utilService.routerChangeHelper('tag',$event)" [contentData]="data"></ui-content-single>
                </div>
                <div class="empty" *ngIf="seeMoreLoading">
                    <div style="display: inline-block">
                        <mat-spinner></mat-spinner>
                    </div>
                </div>
                <ng-container *ngIf="seeMoreChecker">
                    <div class="search-results" infiniteScroll [infiniteScrollDistance]="1" [infiniteScrollThrottle]="50" [infiniteScrollDisabled]="blockInfiniteScroll" (scrolled)="seeMore()"></div>
                </ng-container>
            </div>
            <div *ngIf="selectedTab == '2'">
                <ui-button (btnClicked)="deleteAllDrafts()" [text]="'Delete All Drafts'" [className]="'delete-draft'"></ui-button>
                <div *ngIf="drafts && drafts.length > 0;else no_content">
                    <ui-draft *ngFor="let oDraft of drafts; let index = index" [type]="'single'" (deleteClick)="deleteDraft(oDraft.id, index)" (editClick)="editDraft(oDraft.id)" (contentClick)="editDraft(oDraft.id)" [draftData]="oDraft"></ui-draft>
                </div>
                <ng-template #no_content></ng-template>
            </div>
        </div>
    </div>
</div>
